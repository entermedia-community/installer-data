<?xml version="1.0" encoding="utf-8" ?>
<rsp stat="ok">
#set( $mediaarchive = $entermedia.getMediaArchive($context.getRequestParameter("catalogid") ) )
#set( $cataloghome = $mediaarchive.getCatalogHome() )
#set( $fields = $searcher.getDetailsForView("asset/restsearchresults",$user) )
<hits sessionid="$hits.sessionId" page="$hits.page" pages="$hits.totalPages" totalsize="$hits.size()">
#foreach( $hit in $hits.getPageOfHits() )
<hit #foreach( $field in $fields )
#set( $value = false )
#set( $value = $hit.get($field.id))
#if( $value )#if($field.isList())${field.id}id="#esc($value)" ${field.id}="#esc( "$!searcherManager.getListData($field,$value)" )"#{else}${field.id}="#esc( $value )"#{end}#end #end>
#set( $type = $mediaarchive.getMediaRenderType($hit.fileformat))
#if( $type == "default" )
	#set ($ext = $hit.fileformat)
	#set ($thumb = "$mediaarchive.getThemePrefix()/entermedia/images/mimetypes/${ext}.gif")
#else
	#set( $thumb = "$home$cataloghome/downloads/preview/thumb/$hit.sourcepath/thumb.jpg")
#end
	<thumb>$thumb</thumb>
#if( $type == "image" || $type == "document")
#set( $preview = "$home$cataloghome/downloads/preview/large/$hit.sourcepath/image.jpg")
#elseif(  $type == "video" )
#set( $preview = "$home/$catalogid/downloads/converted/cache/${hit.sourcepath}/preview.flv")
#elseif( $type == "audio" )
#set( $preview = "$home/$catalogid/downloads/mp3/${hit.sourcepath}/audio.mp3")
#end
	<preview>$preview</preview>
	<original>$home$cataloghome/downloads/originals/$hit.sourcepath/$hit.name</original>
</hit>

#end
</hits>
</rsp>