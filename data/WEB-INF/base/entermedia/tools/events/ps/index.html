<h2>Event Queue</h2>

#set( $sorted = $patheventmanager.getRunningTasksSorted() )
#if( $sorted.size() > 0 )

<div id="emselectable">
<table width="100%" >
<tr>
<th>Next Run</th>
#foreach( $runner in $sorted )

#set( $event = $runner.getTask() )

<tr rowid="$event.getPage().getPath()">
<td>
$patheventmanager.getTimeCalculator().findTimeFrom($runner.getTimeToStart())
</td>

<td>
<b>$event.getPage().getName()</b>
</td>

<td>
#if( $event.isRunning() )[[event is running]]#end
</td>

<td>
#if($event.getPage().getProperty("eventname"))
	$context.getText($event.getPage().getProperty("eventname"))
	<div class="emselectabledetails">$!context.getText($event.getPage().getProperty("description"))</div>
#else
#end
#if( $event.getLastRun() )
<div>[[last run]]:
 $context.getDateTime($event.getLastRun() )
</div>
#end
</td>


<td>
#if( $event.isRunning() )
[[running]]
#end
</td>

<td>
#if( !$runner.isCurrent() )
	[[duplicate]]
#end
</td>
<td>

#if( $event.getPeriod() > 0 )
[[repeating]]
#end
</td>

</tr>

#end
</table>

<form name="showevent" target="_top" method="post" action="../edit/edit.html">
	<input name="eventpath" type="hidden" id="emselectedrow" />
</form>

<a href="./index.html">refresh</a>

</div>
	
#else
	[[No events in queue]]
#end


