## needs: viewname, catalogid, searcher | searchtype + searcherManager
## optional: $fieldsperrow

#if( !$searcher )
	#set( $searcher = $searcherManager.getSearcher( $catalogid, $searchtype ) )
#end

#set( $details = $searcher.getDetailsForView($viewname, $user) )
#if( $details.size() > 0 )

	#if( !$viewname )
		#set( $viewname = $context.findValue("$viewname") )
	#end
	
	#if( !$fieldsperrow )
		#set( $fieldsperrow = 3 )
	#end

	<input type="hidden" name="view" value="$viewname"/>
	<table class="uploadformtable" >
	#foreach( $row in [0..2] )	
		<tr>
		#set( $offset = $row * $fieldsperrow )
		#foreach( $i in [1..$fieldsperrow] )
			#set( $index = $offset + $i - 1 )
			#if( $details.size() > $index )
				#set( $detail = $details.get( $index ) )
				<td id="label$detail.id">$detail.text</td>
			#end
		#end
		</tr>
		<tr>
		#foreach( $i in [1..$fieldsperrow] )
			#set( $index = $offset + $i - 1 )
			#if( $details.size() > $index )
				#set( $detail = $details.get( $index ) )
				<td id="input$detail.id">
					$context.putPageValue("detail", $detail)
					$pages.include("/$applicationid/components/xml/detailedit.html", $context)
				</td>
			#end
		#end
		</tr>
	#end	
	</table>
#else
	<p>No information needed.</p>
	<p>$searcher</p>
	<p>$viewname</p>
	<p>$details</p>
#end