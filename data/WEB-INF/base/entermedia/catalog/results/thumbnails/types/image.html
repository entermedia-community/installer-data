#if (!$cell)
	#set ($cell = $asset)
#end

#if (!$cell)
	#set ($cell = $data)
#end

#set ($sourcepath = $cell.sourcepath)

#if( $parenthits )
	#set( $rootid = $parenthits.sessionId ) ##what is this for?
#else
	#set( $rootid = $hits.sessionId )
#end

#if( !$clink )
#set( $clink = "$home$cataloghome/detailviewer/viewer/index.html?sourcepath=${sourcepath}&hitssessionid=$rootid" )
#end	
$context.putPageValue("clink", $clink)

#set ($mediumend = "/$catalogid/downloads/preview/medium/$sourcepath/thumb.jpg")
#set( $msize = "$home$mediumend")
#set ($thumbsize = $context.getPageValue("thumbsize"))
#if(!$thumbsize)
	#set($thumbsize = "thumb")
#end

#set ($usethumblink = $context.getPageValue("usethumblink"))
#if(!$usethumblink)
	#set($usethumblink = "true")
#end

#set( $type = $mediaarchive.getMediaRenderType($cell.fileformat))
<div id="draggable|${cell.id}|${catalogid}">
#if($usethumblink.equals("true"))
	<a href="$clink" >
		$pages.include("${cataloghome}/results/thumbnails/media/${type}.html", $context)
	</a>
#else

	$pages.include("${cataloghome}/results/thumbnails/media/${type}.html", $context)
#end
</div>
