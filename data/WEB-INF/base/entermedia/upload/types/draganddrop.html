#set($catalogid = $context.getRequestParameter("uploadcatalog"))
#set($path = "/${catalogid}/temp/uploading/${user.getUserName()}")

<p>[[Select a folder or any file format that you want to share.]]</p>


<APPLET style="margin-left: 20px;" code="org.openedit.sync.FilePickerApplet"
	width="600" height="70" MAYSCRIPT
	archive="$home/system/openedit-upload.jar?v=$context.findValue('appletserial')">
	<PARAM name="showdialog" value="true"/>
</APPLET>

#set( $action = $context.getRequestParameter("action"))
#if( !$action )
#set( $action =	"/$applicationid/upload/finish.html" )
#end

<form name="uploadwizard" id="uploadwizard"  method="post" target="_top" action="$home$action" >

<input type="hidden" name="catalogid" value="$!catalogid"/>
<input type="hidden" name="searchtype" value="$page.searchtype"/>

<!-- Fields pointing to files go here -->
<div id="uploadforminsertionpoint" > </div>

<p><button type="submit" class="uploadbutton">Ok</button>

##<button class="uploadbutton" onclick="jQuery('#fancy_close').trigger('click');return false;">Cancel</button></p>

</form>

<script type="text/javascript">

setUploads = function(paths, parentpaths, sizes)
{
	var inserthere = jQuery("#uploadforminsertionpoint");
	inserthere.empty();

	var pathsa = paths.split(";");
	var parentsa = parentpaths.split(";");
	var sizea = sizes.split(";");
	
	for( var i=0;i<pathsa.length;i++)
	{
		var newField = "<input type='hidden' name='localfilepath' value='" + pathsa[i] +"' />";
		inserthere.append(newField);

		var newFieldP = "<input type='hidden' name='parentpath' value='" + parentsa[i] +"' />";
		inserthere.append(newFieldP);

		var newFieldSize = "<input type='hidden' name='filesize' value='" + sizea[i] +"' />";
		inserthere.append(newFieldSize);
	}	
}


</script>

