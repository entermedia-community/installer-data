#set ($searcher = $searcherManager.getSearcher($parentcatalogid, "asset"))
#set ($details = $searcher.getDetailsForView($view, $user))

## $detail
## $searcher
## $val
## $searcherManager

$context.putPageValue("searcherManager", $searcherManager)
$context.putPageValue("searcher", $searcher)
#set($numHits = $context.getPageValue("numHits"))
<p>
[[Total Items Identified]]: #if($numHits) $numHits #else $hits.size() #end
</p>

<table border=1 width="80%">
	<tr>
		#foreach ($detail in $details)
			<th>$detail.getText($context)</th>
		#end
	</tr>

#foreach ($data in $hits)
	<tr>
		#foreach ($detail in $details)
			$context.putPageValue("detail", $detail)
			#set ($value = "")
			#set ($value = $data.get($detail.id))
			$context.putPageValue("val", $value)
			<td>
				<a href="$home/$data.catalogid/assets/${data.get('sourcepath')}.html">
					$pages.include("/${applicationid}/components/xml/dynamic/display.html", $context)
				</a>
			</td>
		#end
	</tr>
#end

</table>